(this["webpackJsonpreact-firebase-notifications"]=this["webpackJsonpreact-firebase-notifications"]||[]).push([[0],{55:function(e,a,t){e.exports=t(89)},60:function(e,a,t){},79:function(e,a,t){},89:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(17),s=t.n(c),i=(t(60),t(23)),o=t(22),l=t.n(o),m=t(51),u=t(52),f=t(35),g=t(28),b=t(15),d=(t(78),t(79),t(54)),E=t(53),h=t(37),p=t(16),v=t(36),S=t(34),w=t(33),y=t.n(w);t(90);y.a.initializeApp({apiKey:"AIzaSyAElLIaEfWyeAEXGg0cfn9cVJ1unQsAi0I",authDomain:"web-chat-72b52.firebaseapp.com",databaseURL:"https://web-chat-72b52.firebaseio.com",projectId:"web-chat-72b52",storageBucket:"web-chat-72b52.appspot.com",messagingSenderId:"442573275776",appId:"1:442573275776:web:9f6cefe95e1e61b96fdc65",measurementId:"G-3FDDZHC2DS"});var k=y.a.messaging(),I=function(e){var a=e.token,t=r.a.useState([]),n=Object(i.a)(t,2),c=n[0],s=n[1],o=r.a.useState(!1),m=Object(i.a)(o,2),u=m[0],f=m[1];return r.a.useEffect((function(){f(!0),l.a.get("/messages").then((function(e){s(e.data.messages),f(!1)}))}),[]),new Promise((function(e){k.onMessage((function(a){e(a)}))})).then((function(e){var a=e.data,t=a.title,n=a.body;b.b.info("".concat(t,"; ").concat(n))})).catch((function(e){b.b.error(JSON.stringify(e))})),r.a.createElement(g.a,null,r.a.createElement(E.a,{initialValues:{name:"",message:""},onSubmit:function(e,t){l.a.post("/messages",Object(d.a)({},e,{token:a})).then((function(e){s(e.data.messages.concat(c)),t.setSubmitting(!1),b.b.success("Submitted succesfully")})).catch((function(e){console.log(e),b.b.error("There was an error saving the message")}))}},(function(e){var a=e.handleSubmit,t=e.handleChange,n=e.isSubmitting;return r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a,{className:"mb-3"},r.a.createElement(p.a.Prepend,null,r.a.createElement(p.a.Text,{id:"basic-addon1"},"Name")),r.a.createElement(v.a,{placeholder:"Enter your name",onChange:t("name")})),r.a.createElement(p.a,{className:"mb-3"},r.a.createElement(p.a.Prepend,null,r.a.createElement(p.a.Text,{id:"basic-addon1"},"Message")),r.a.createElement(v.a,{onChange:t("message"),placeholder:"Enter a message"})),n?r.a.createElement(h.a,{variant:"primary",disabled:!0},r.a.createElement(S.a,{as:"span",size:"sm",role:"status",animation:"grow","aria-hidden":"true"}),"Loading..."):r.a.createElement(h.a,{variant:"primary",onClick:function(){return a()}},"Submit"))})),r.a.createElement("div",{className:"message-list"},r.a.createElement("h3",null,"Messages"),u?r.a.createElement(S.a,{animation:"border",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading...")):r.a.createElement(r.a.Fragment,null,c.map((function(e,a){var t=e.name,n=e.message;return r.a.createElement("div",{key:a},t,": ",n)})))))};l.a.defaults.baseURL="http://localhost:5000/v1";var C=function(){var e=r.a.useState(""),a=Object(i.a)(e,2),t=a[0],c=a[1];return new Promise((function(e,a){k.requestPermission().then((function(){return k.getToken()})).then((function(a){e(a)})).catch((function(e){a(e)}))})).then((function(e){console.log(e),c(e)})).catch((function(e){console.log(e)})),r.a.createElement(n.Fragment,null,r.a.createElement(b.a,{autoClose:2e3,position:"top-center"}),r.a.createElement(f.a,{bg:"primary",variant:"dark"},r.a.createElement(f.a.Brand,{href:"#home"},"Firebase notifictations with React and Express")),r.a.createElement(g.a,{className:"center-column"},r.a.createElement(m.a,null,r.a.createElement(u.a,null,r.a.createElement(I,{token:t})))))};s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(C,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.register("firebase-messaging-sw.js").then((function(e){return console.log("[SW]: SCOPE: ",e.scope),e.scope})).catch((function(e){return e}))}},[[55,1,2]]]);
//# sourceMappingURL=main.7090f086.chunk.js.map